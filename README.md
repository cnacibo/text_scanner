## Описание проекта

Микросервисное приложение для загрузки, хранения, извлечения и анализа текстового содержимого файлов. Проект разделён на три сервиса, взаимодействующих друг с другом:

* **ApiGateway** — отвечает за маршрутизацию и агрегацию данных.
* **FileStoringService** — сервис, отвечающий за сохранение файлов на локальное хранилище и управление данными о файлах в базе данных.
* **FileAnalysisService** — сервис для анализа содержимого файлов.

Все сервисы используют PostgreSQL для хранения данных и взаимодействуют по REST API.

---

## Архитектура

### Микросервисная архитектура

* Каждый сервис развёрнут как отдельное приложение с собственным Docker-контейнером.
* База данных PostgreSQL общая.
* Каждый сервис построен с использованием FastAPI, что обеспечивает высокую производительность и встроенную документацию API.

### Структура сервисов

Каждый сервис имеет примерно такую структуру:

```
service_name/
├── app/
│   ├── api/              # REST API маршруты и эндпоинты
│   ├── domain/           # Основные сущности и интерфейсы
│   ├── infrastructure/   # Работа с БД и внешними ресурсами
│   ├── use_cases/        # Бизнес-логика 
│   ├── schemas/          # Модели для валидации
│   └── main.py           # Точка запуска
├── Dockerfile
└── requirements.txt
```

---

## Разделение на микросервисы

### 1. ApiGateway

#### `POST /files`

* Описание: Загружает файл, пересылает его в FileStoringService.
* Параметры:

  * `file`  — загружаемый файл.
* Ответ:

  ```json
  {
    "file_id": "uuid-идентификатор файла"
  }
  ```

#### `GET /files/{file_id}`

* Описание: Получает метаданные файла (id, имя).
* Параметры:

  * `file_id` — UUID файла.
* Ответ:

  ```json
  {
    "file_id": "uuid-идентификатор файла",
    "filename": "имя файла"
  }
  ```

#### `GET /files/{file_id}/content`

* Описание: Получает извлечённый из файла текст.
* Параметры:

  * `file_id` — UUID файла.
* Ответ:

  ```json
  {
    "content": "текстовое содержимое файла"
  }
  ```

---

### 2. FileStoringService

* Сохраняет файл на локальный диск.
* Сохраняет метаданные в PostgreSQL: id, имя, путь к файлу.
* Предоставляет API для получения метаданных и доступа к файлу по пути.

---

### 3. FileAnalysisService

* Получает файл по пути.
* Выполняет извлечение текста из файла.
* Анализирует текст: подсчитывает количество слов/символов/абзацев.
* Возвращает текстовую информацию через API.

---

## Запуск проекта

Чтобы скачать проект, выполните команду:

```bash
git clone https://github.com/cnacibo/text_scanner.git
```
После этого перейдите в папку проекта:
```bash
cd TextScanner
```

Далее необходимо запустить проект с помощью докера:
```bash
docker-compose up --build
```
Теперь все должно работать :)) 

